/*! WillJS v1.6.0 | github.com/kawamanza/willjs/ */
(function(q,H,m,y){function r(a){this.name=a;this.constructor=r}function s(a){return"string"===typeof a}function t(a){return"[object Array]"===S.call(a)}function v(a){return"object"!==typeof a}function o(a){return"function"===typeof a}function I(a,b){var c,d,e,f;for(d in b)if(b.hasOwnProperty(d))if(f=b[d],":"==d.charAt(0))a[d.substr(1)]=f;else if(1<(c=d.split(/\./)).length){d=c.shift();e=a[d];if(v(e)||t(e))e=a[d]={};d=c.join(".");c=f;d&&((c={})[d]=f);I(e,c)}else o(f)&&/\W$/.test(d)?(d=RegExp["$`"],
"="==RegExp["$&"]?a.__defineSetter__(d,f):a.__defineGetter__(d,f)):a[d]=f}function j(a){for(var b,c,d,e=1,f=arguments,h=f.length;e<h;e++)b=f[e],s(b)?d=b:b&&(c=b,d&&((c={})[d]=b),I(a,c));return a}function T(a,b){return function(){return b.apply(a,arguments)}}function J(a,b){var c=l.createElement(a),d;for(d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}function z(a,b){var c,d,e,f,h,g,i;s(a)?h=/\@/.test(a):(c=a.src||a.href,d=a.getAttribute(K),a=(d?d+"@":"")+c);if(U.test(a)){d=RegExp.$1;c=
RegExp.$2;e=RegExp.$3;if(f="^"==c.charAt(0))c=c.substr(1);b&&"."==c.charAt(0)&&(c=J("script",{src:b+c}).src);/^\/\//.test(c)&&"https:"!=V&&(c="http:"+c)}g=W.test(c);d||(i=c.split(X),d=i.pop(),d=Y.test(d)?RegExp.$1:d,g&&(Z.test(i[0])&&i.shift(),i.push(d),d=i.join("_").replace(/:/,"-")));j(this,{id:d,fixedId:h,pre:f,css:g,tn:g?"link":"script",qs:e||"",href:c})}function $(a){var b=a.id,c=a.href,d=a.css,e=l.getElementsByTagName(a.tn),f,h=e.length,g,i;for(f=0;f<h;)if(g=e[f++],i=new z(g),i.id===b)return a.fixedId&&
d&&i.href!=c&&(g.href=c+(a.qs||i.qs)),[d,g];return!1}function aa(a,b,c,d){var e=!1;a.onload=a.onreadystatechange=function(){var f=this.readyState;if(!e&&(!f||"loaded"===f||"complete"===f))e=!0,c(n),a.onload=a.onreadystatechange=m,a.onerror=a.onabort=m,d&&b&&a.parentNode&&b.removeChild(a)};a.onerror=a.onabort=function(){e=!0;c("error");a.onload=a.onreadystatechange=m;a.onerror=a.onabort=m;b&&a.parentNode&&b.removeChild(a)}}function A(){return l.getElementsByTagName("head")[0]||l.documentElement}function L(a,
b){var c,d=l.getElementsByTagName("link"),e=d.length;for(c=0;c<e;c++){if(d[c]===a)return!0;if(d[c]===b)return!1}}function w(a,b){(b=b||l.getElementsByTagName("link")[0])?A().insertBefore(a,b):A().appendChild(a)}function u(a){j(this,{queue:[],active:!1,run:a})}function ba(a,b,c,d,e){var f=A(),h=b.css,g=b.href,i=b.qs,k=a.cfg.queryString;i?k=i.substr(1):o(k)?k=k(g):k||(k=(i=a.info.qs)?i.substr(1):"");a={};a[K]=b.id;h&&(a.rel="stylesheet");a[h?"href":"src"]=g+(k?"?"+k:"");a=J(b.tn,a);h?(b.pre?w(a,c):
c&&c.nextSibling?f.insertBefore(a,c.nextSibling):w(a),d(n,a)):(aa(a,f,d,e),f.appendChild(a))}function M(a,b,c,d){var e=this,f=!1,h,g,i,k,j;d||(d=B);k=i=function(){f||(j=d.info,e=this,h=arguments,c||(g=h),k.pluginFile==b&&j.min&&(b=k.pluginFile.replace(ca,".min.js")),d.use("willjsPlugin-"+a+"@"+j.dir+b+j.qs)(function(b){f=!0;b===n&&(i=e[a].apply(e,g),c&&i.apply(e,h))}))};c&&(k=function(){g=arguments;e=this;return function(){i.apply(e,arguments)}});k.pluginFile=b;e[a]=k}function N(a,b){"cfg"in a||(j(a,
{registry:{},cfg:j(new O,{processors:new C,assetsList:{jquery:["//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js?"]},domains:{local:{format:"json"}},packages:{}})}),"use"in a||j(a,p));o(b)&&b(a.cfg)}function P(a,b,c){var d="impl";s(c)&&(d=c,c=b[d]);b[d]=function(){var e=arguments,f=b.assets;if(b.getImpl){c=b.getImpl(a);delete b.getImpl}f&&f.length?D(a,"loadDependenciesAndCall",[a,b,e]):(b[d]=d=="impl"?T(a,c):c).apply(b,e)}}function E(a,b,c){if(!v(b)){s(c)&&(c=new x(a,c));var d=b.impl,e=b.assets;
if(o(d||b.getImpl))c=c.entry,c.assets=v(e)||!t(e)?[]:e,c.getImpl=b.getImpl,P(a,c,d),c.rescue=b.rescue||c.rescue;else for(d in b)c.name=d,E(a,b[d],c)}}function x(a,b){var c=a.cfg,d=c.domains,e=a.modes,f,h;da.test(b)&&(b=RegExp.$3,h=RegExp.$2||c.packages[b]||c.defaultPackage,f=RegExp.$1||"local");d=d[f]||d.local||{};j(this,{domainName:f,packageName:h,name:b,base:d.domain,format:d.format||"json",prod:(d.mode||c.mode||e.DEV)==e.PROD,ctx:a})}function D(a,b,c){var a=a.cfg.processors,d=a[b];d||(d=a[b]=new u(function(a){o(a)&&
a()}));d.process(c)}function Q(a,b,c){var d={assets:b};return function(b,f){if(!d.impl){var h,g;o(b)?(h=function(){b(n)},g=function(){b("error")}):h=g=function(){};P(a,d,h);d.dir=f;d.rescue=g;d.removeElement=c;d.impl()}}}function C(){}function O(){}var B,p={},K="data-willjs-id",n="success",W=/\.css$/,ca=/\.js$/,X=/\/+/,Z=/^\^?(?:\w+:|)$/,F=/^(?:[^@]+@)?\|/,Y=/^([\w\-\.]+?)(?:\.min|\-\d+(?:\.\d+)*(?:\.?\w+)?)*\.(?:css|js)$/,U=/^(?:([\w\-\.]+)\@)?([^#\?]+)(?:(\?[^#]*))?/,R=/^[\w\-]+$/,da=/^(?:(\w+):)?(?:(\w+)\.)?(\w+)$/,
G=Array.prototype.slice,S=Object.prototype.toString,V=q.location.protocol,l=q.document;j(u.prototype,{sched:function(){var a=this;setTimeout(function(){a.process()},0)},process:function(a){var b=this,c=b.queue;if(arguments.length){if(v(a)||!t(a))a=[a];c.push(a);setTimeout(function(){c.length&&!b.active&&(b.active=!0,b.process())},2)}else if(c.length){a=c.shift();try{!1!==b.run.apply(b,a)&&b.sched()}catch(d){throw b.sched(),d;}}else b.active=!1}});j(x.prototype,{"dir!":function(){var a=this.ctx,b=
this.packageName;return(this.base||a.info.dom)+(this.prod||b==a.cfg.defaultPackage?"":b+"/")},"url!":function(){return this.dir+(this.prod?this.packageName:this.name)+"."+this.format},"entry!":function(){var a=this.ctx.registry,b=this.domainName,c=this.packageName,a=a[b]||(a[b]={}),c=a[c]||(a[c]={}),a=this.name;return c[a]||(c[a]={rescue:function(){},dir:this.dir})},toString:function(){return this.domainName+":"+this.packageName+"."+this.name}});j(p,{use:function(a){return Q(this,t(a)?a:G.call(arguments,
0),!1)},addComponent:function(a,b){1==arguments.length&&(b=a,a=new x(this,"unknown"));E(this,b,a)},addProcessor:function(a,b){var c=this.cfg.processors;c[a]||(c[a]=new u(b))},process:function(a){D(this,a,G.call(arguments,1))},modes:{DEV:2,PROD:1},as:function(a){return!a?a:q[a]||(q[a]=new r(a))},configure:function(a){this.configured=!0;N(this,a);return this},":info!":function(){var a=this._info,b,c,d,e;if(!a){b=l.getElementsByTagName("script");y||(y="will");d=0;for(c=b.length;d<c;d++)if(e=new z(b[d]),
e.id==y){b=e.href;this._info=a={href:b,qs:e.qs,min:/\.min\.js/.test(b),dir:b=b.replace(/\/(?:will\/)*[^\/]+$/,"/will/"),dom:b+"components/"};break}}return a}});j(p,"u",{hit:M,Processors:C,Processor:u,Path:x,process:D,requireAssets:Q,registerFunctions:E,extend:j});j(r.prototype,p);j(O.prototype,{mode:p.modes.DEV,version:"1.6.0",addDomain:function(a,b,c,d){b&&(b+=/\/$/.test(b)?"":"/");this.domains[a]={format:s(c)?c:c?"js":"json",domain:b,mode:d}},addAssetsList:function(a){if(!R.test(a))throw Error("invalid term: "+
a);this.assetsList[a]=G.call(arguments,1)},defaultPackage:"root",registerPackage:function(a,b){var c=b.split(/,/),d,e,f;d=this.packages;f=0;for(e=c.length;f<e;)d[c[f++]]=a}});C.prototype.loadDependenciesAndCall=new u(function(a,b,c){var d=this,e=a.cfg,f=e.assetsList,e=e.debug,h,g=b.assets,i=b.dir,j,l;if(g.length){if(R.test(h=g[0]))if(t(h=f[h])){f=0;for(j=h.length;f<j;f++)if(/\.css(?:[?#].*)?$/.test(h[f])){/\^/.test(h[f])&&(delete b.bottomCss,delete b.lastCss);break}h=h.slice(0);h.splice(0,0,0,1);
g.splice.apply(g,h)}else{b.rescue.apply(m,c);return}h=new z(g[0],i);l=h.pre;if(i=$(h)){g.shift();if(i[0]){if(a=b.lastCss)e=b.bottomCss.nextSibling,l&&L(a,i[1])?w(i[1],a):e&&L(i[1],b.bottomCss)&&w(i[1],e);if(!a||!l)b.bottomCss=i[1];b.lastCss=i[1]}for(;g.length&&F.test(g[0]);)g.shift();b.impl.apply(m,c)}else return e&&e('** loading asset "'+h.href+'"'),ba(a,h,b[l?"lastCss":"bottomCss"],function(a,e){try{if(1<g.length&&F.test(g[1]))if(a===n){do g.shift();while(1<g.length&&F.test(g[1]))}else g[1]=g[1].replace(/\|/,
""),a=n;if(a===n){g.shift();if(e){if(!b.lastCss||!l)b.bottomCss=e;b.lastCss=e}b.impl.apply(m,c)}else b.rescue.apply(m,c)}finally{d.sched()}},b.removeElement),!1}else b.impl.apply(m,c)});q[H]=B=new r(H);N(B);p.u.hit("loadComponent","componentLoader.js");M.call(r.prototype,"call","callComponent.js",!0)})(window,"will",null);
