/*! WillJS v1.5.0 | github.com/kawamanza/willjs/ */
(function(t,J,q,B){function n(a){this.name=a;this.constructor=n}function l(a){return"string"===typeof a}function r(a){return"[object Array]"===U.call(a)}function x(a){return"object"!==typeof a}function y(a){return"function"===typeof a}function K(a,b,c){var d,e;l(b)&&(b=b.split(/\./));d=b.shift();if(":"==d.charAt(0))b.unshift(d.substr(1)),a[b.join(".")]=c;else if(0==b.length)y(c)&&/^(.+?)([^\w])$/.test(d)?(d=RegExp.$1,"="==RegExp.$2?a.__defineSetter__(d,c):a.__defineGetter__(d,c)):a[d]=c;else{e=a[d];
if(x(e)||r(e))e={},a[d]=e;K(e,b,c)}}function i(a,b,c){var d="",e,f=arguments.length;3>f&&(c=b,b=a,a=this);l(b)?(d=b+".",b=c):2==f&&(a=b,b=c);for(e in b)b.hasOwnProperty(e)&&K(a,d+e,b[e]);return a}function V(a,b){return function(){return b.apply(a,arguments)}}function L(a,b){var c=u.createElement(a),d;for(d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}function C(a,b){var c,d,e,f,g,h,m;l(a)?g=/\@/.test(a):(c=a.src||a.href,d=a.getAttribute(M),a=(d?d+"@":"")+c);if(W.test(a)){d=RegExp.$1;
c=RegExp.$2;e=RegExp.$3;if(f="^"==c.charAt(0))c=c.substr(1);b&&"."==c.charAt(0)&&(c=L("script",{src:b+c}).src);/^\/\//.test(c)&&"https:"!=X&&(c="http:"+c)}h=Y.test(c);d||(m=c.split(Z),d=m.pop(),d=$.test(d)?RegExp.$1:d,h&&(aa.test(m[0])&&m.shift(),m.push(d),d=m.join("_").replace(/:/,"-")));i(this,{id:d,fixedId:g,pre:f,css:h,tn:h?"link":"script",qs:e||"",href:c})}function D(){return u.getElementsByTagName("head")[0]||u.documentElement}function N(a,b){var c,d=u.getElementsByTagName("link"),e=d.length;
for(c=0;c<e;c++){if(d[c]===a)return!0;if(d[c]===b)return!1}}function A(a,b){(b=b||u.getElementsByTagName("link")[0])?D().insertBefore(a,b):D().appendChild(a)}function o(a){i(this,{queue:[],active:!1,run:a})}function O(a,b,c,d){var e=this,f=!1,g,h,m,i,j;d||(d=E);i=m=function(){f||(j=d.info,e=this,g=arguments,c||(h=g),i.pluginFile==b&&j.min&&(b=i.pluginFile.replace(ba,".min.js")),d.use("willjsPlugin-"+a+"@"+j.dir+b+j.qs)(function(b){f=!0;b===w&&(m=e[a].apply(e,h),c&&m.apply(e,g))}))};c&&(i=function(){h=
arguments;e=this;return function(){m.apply(e,arguments)}});i.pluginFile=b;e[a]=i}function P(a,b){"cfg"in a||(i(a,{registry:{},cfg:i(new Q,{processors:new F,domains:{local:{format:"json"}},packages:{}})}),"use"in a||i(a,p));y(b)&&b(a.cfg)}function R(a,b,c){var d="impl";l(c)&&(d=c,c=b[d]);b[d]=function(){var e=arguments,f=b.assets;if(b.getImpl){c=b.getImpl(a);delete b.getImpl}f&&f.length?G(a,"loadDependenciesAndCall",[a,b,e]):(b[d]=d=="impl"?V(a,c):c).apply(b,e)}}function H(a,b,c){if(!x(b)){l(c)&&(c=
new s(a,c));var d=b.impl,e=b.assets;if(y(d||b.getImpl))c=c.entry,c.assets=x(e)||!r(e)?[]:e,c.getImpl=b.getImpl,R(a,c,d),c.rescue=b.rescue||c.rescue;else for(d in b)c.name=d,H(a,b[d],c)}}function s(a,b){var c=a.cfg,d=c.domains,e=a.modes,f,g;ca.test(b)&&(b=RegExp.$3,g=RegExp.$2||c.packages[b]||c.defaultPackage,f=RegExp.$1||"local");d=d[f]||d.local||{};i(this,{domainName:f,packageName:g,name:b,base:d.domain,format:d.format||"json",prod:(d.mode||c.mode||e.DEV)==e.PROD,ctx:a})}function G(a,b,c){var a=
a.cfg.processors,d=a[b];d||(d=a[b]=new o(function(a){y(a)&&a()}));d.process(c)}function S(a,b,c){var d={assets:b};return function(b,f){if(!d.impl){var g,h;y(b)?(g=function(){b(w)},h=function(){b("error")}):g=h=function(){};R(a,d,g);d.dir=f;d.rescue=h;d.removeElement=c;d.impl()}}}function F(){}function Q(){}var E,p={},M="data-willjs-id",w="success",Y=/\.css$/,ba=/\.js$/,Z=/\/+/,aa=/^\^?(?:\w+:|)$/,I=/^(?:[^@]+@)?\|/,$=/^([\w\-\.]+?)(?:\.min|\-\d+(?:\.\d+)*(?:\.?\w+)?)*\.(?:css|js)$/,W=/^(?:([\w\-\.]+)\@)?([^#\?]+)(?:(\?[^#]*))?/,
ca=/^(?:(\w+):)?(?:(\w+)\.)?(\w+)$/,T=Array.prototype.slice,U=Object.prototype.toString,X=t.location.protocol,u=t.document;i(o.prototype,{sched:function(){var a=this;setTimeout(function(){a.process()},0)},process:function(a){var b=this,c=b.queue;if(arguments.length){if(x(a)||!r(a))a=[a];c.push(a);setTimeout(function(){c.length&&!b.active&&(b.active=!0,b.process())},2)}else if(c.length){a=c.shift();try{!1!==b.run.apply(b,a)&&b.sched()}catch(d){throw b.sched(),d;}}else b.active=!1}});i(s.prototype,
{"dir!":function(){var a=this.ctx,b=this.packageName;return(this.base||a.info.dom)+(this.prod||b==a.cfg.defaultPackage?"":b+"/")},"url!":function(){return this.dir+(this.prod?this.packageName:this.name)+"."+this.format},"entry!":function(){var a=this.ctx.registry,b=this.domainName,c=this.packageName,a=a[b]||(a[b]={}),c=a[c]||(a[c]={}),a=this.name;return c[a]||(c[a]={rescue:function(){},dir:this.dir})},toString:function(){return this.domainName+":"+this.packageName+"."+this.name}});i(p,{use:function(a){return S(this,
r(a)?a:T.call(arguments,0),!1)},addComponent:function(a,b){1==arguments.length&&(b=a,a=new s(this,"unknown"));H(this,b,a)},addProcessor:function(a,b){var c=this.cfg.processors;c[a]||(c[a]=new o(b))},process:function(a){G(this,a,T.call(arguments,1))},modes:{DEV:2,PROD:1},as:function(a){return!a?a:t[a]||(t[a]=new n(a))},configure:function(a){this.configured=!0;P(this,a);return this},":info!":function(){var a=this._info,b,c,d,e;if(!a){b=u.getElementsByTagName("script");B||(B="will");d=0;for(c=b.length;d<
c;d++)if(e=new C(b[d]),e.id==B){b=e.href;this._info=a={href:b,qs:e.qs,min:/\.min\.js/.test(b),dir:b=b.replace(/\/(?:will\/)*[^\/]+$/,"/will/"),dom:b+"components/"};break}}return a}});i(p,"u",{hit:O,Processors:F,Processor:o,Path:s,process:G,requireAssets:S,registerFunctions:H,extend:i});i(n.prototype,p);i(Q.prototype,{mode:p.modes.DEV,version:"1.5.0",addDomain:function(a,b,c,d){b&&(b+=/\/$/.test(b)?"":"/");this.domains[a]={format:l(c)?c:c?"js":"json",domain:b,mode:d}},defaultPackage:"root",registerPackage:function(a,
b){var c=b.split(/,/),d,e,f;d=this.packages;f=0;for(e=c.length;f<e;)d[c[f++]]=a}});F.prototype.loadDependenciesAndCall=new o(function(a,b,c){var d=this,e=a.cfg.debug,f=b.assets,g,h,i;g=b.dir;if(f.length){g=new C(f[0],g);i=g.pre;a:{h=g.id;var l=g.href,j=g.css,v=u.getElementsByTagName(g.tn),p,t=v.length,n,o;for(p=0;p<t;)if(n=v[p++],o=new C(n),o.id===h){g.fixedId&&(j&&o.href!=l)&&(n.href=l+(g.qs||o.qs));h=[j,n];break a}h=!1}if(h){f.shift();if(h[0]){if(a=b.lastCss)g=b.bottomCss.nextSibling,i&&N(a,h[1])?
A(h[1],a):g&&N(h[1],b.bottomCss)&&A(h[1],g);if(!a||!i)b.bottomCss=h[1];b.lastCss=h[1]}for(;f.length&&I.test(f[0]);)f.shift();b.impl.apply(q,c)}else{e&&e('** loading asset "'+g.href+'"');var e=b[i?"lastCss":"bottomCss"],r=function(a,e){try{if(1<f.length&&I.test(f[1]))if(a===w){do f.shift();while(1<f.length&&I.test(f[1]))}else f[1]=f[1].replace(/\|/,""),a=w;if(a===w){f.shift();if(e){if(!b.lastCss||!i)b.bottomCss=e;b.lastCss=e}b.impl.apply(q,c)}else b.rescue.apply(q,c)}finally{d.sched()}},x=b.removeElement,
z=D();h=g.css;l=g.href;v=g.qs;j=a.cfg.queryString;v?j=v.substr(1):y(j)?j=j(l):j||(j=(v=a.info.qs)?v.substr(1):"");a={};a[M]=g.id;h&&(a.rel="stylesheet");a[h?"href":"src"]=l+(j?"?"+j:"");a=L(g.tn,a);if(h)g.pre?A(a,e):e&&e.nextSibling?z.insertBefore(a,e.nextSibling):A(a),r(w,a);else{var k=a,s=!1;k.onload=k.onreadystatechange=function(){var a=this.readyState;if(!s&&(!a||a==="loaded"||a==="complete")){s=true;r(w);k.onload=k.onreadystatechange=q;k.onerror=k.onabort=q;x&&(z&&k.parentNode)&&z.removeChild(k)}};
k.onerror=k.onabort=function(){s=true;r("error");k.onload=k.onreadystatechange=q;k.onerror=k.onabort=q;z&&k.parentNode&&z.removeChild(k)};z.appendChild(a)}return!1}}else b.impl.apply(q,c)});t[J]=E=new n(J);P(E);p.u.hit("loadComponent","componentLoader.js");O.call(n.prototype,"call","callComponent.js",!0)})(window,"will",null);
