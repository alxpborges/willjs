/*! WillJS v1.2.2 | http://github.com/kawamanza/will.js */
(function(n,A,j){function w(a,b){this.name=a;b&&r(this,false)}function k(a){return typeof a==="string"}function s(a){return N.call(a)==="[object Array]"}function o(a){return typeof a!=="object"}function p(a){return typeof a==="function"}function B(a,b,c){var d,e;k(b)&&(b=b.split(/\./));d=b.shift();if(b.length==0)a[d]=c;else{e=a[d];if(o(e)||s(e))e={},a[d]=e;B(e,b,c)}}function i(a,b,c){var d="",e,f=arguments.length;f<3&&(c=b,b=a,a=this);k(b)?(d=b+".",b=c):f==2&&(a=b,b=c);for(e in b)b.hasOwnProperty(e)&&
B(a,d+e,b[e]);return a}function t(a){var b=j,c;k(a)?(a=a.split(/[\?#]/)[0],/^([\w\-\.]+)\@(.+)$/.test(a)?b=[RegExp.$1,RegExp.$2]:(c=a.split(/\//),c=c[c.length-1],b=[O.test(c)?RegExp.$1:c,a],/\.css$/.test(b[1])&&(c=b[1].split(/\/+/),/^\^?(\w+:|)$/.test(c[0])&&c.shift(),c.pop(),c.push(b[0]),b[0]=c.join("_").replace(/:/,"-")))):(c=a.getAttribute("src")||a.getAttribute("href"),b=[a.getAttribute(C),(c||"").split(/[\?#]/)[0]],!b[0]&&b[1]&&(b=t(b[1])));b.length==2&&(b.push(/\.css$/.test(b[1])),b.push(b[2]?
"link":"script"),b.push(/^\^/.test(b[1])),b[4]&&(b[1]=b[1].substr(1)));return b}function P(a){var b=t(a),c=b[0],d=b[1],e=b[2],b=l.getElementsByTagName(b[3]),f,g=b.length,h;for(f=0;f<g;)if(h=b[f++],t(h)[0]===c)return/\@/.test(a)&&e&&h.getAttribute("href")!=d&&h.setAttribute("href",d),[e,h];return false}function Q(a,b,c,d){var e=false;a.onload=a.onreadystatechange=function(){var f=this.readyState;if(!e&&(!f||f==="loaded"||f==="complete"))e=true,c("success"),a.onload=a.onreadystatechange=j,a.onerror=
a.onabort=j,d&&b&&a.parentNode&&b.removeChild(a)};a.onerror=a.onabort=function(){e=true;c("error");a.onload=a.onreadystatechange=j;a.onerror=a.onabort=j;b&&a.parentNode&&b.removeChild(a)}}function x(){return l.getElementsByTagName("head")[0]||l.documentElement}function D(a,b){var c,d=l.getElementsByTagName("link"),e=d.length;for(c=0;c<e;c++){if(d[c]===a)return true;if(d[c]===b)return false}}function u(a,b){(b=b||l.getElementsByTagName("link")[0])?x().insertBefore(a,b):x().appendChild(a)}function v(a){return{queue:[],
active:false,run:a,sched:function(){var b=this;setTimeout(function(){b.process()},0)},process:function(b){var a=this,d=a.queue;if(arguments.length){if(o(b)||!s(b))b=[b];d.push(b);setTimeout(function(){if(d.length&&!a.active)a.active=true,a.process()},2)}else if(d.length){b=d.shift();try{a.run.apply(a,b)!==false&&a.sched()}catch(e){throw a.sched(),e;}}else a.active=false}}}function R(a,b,c,d,e){var f=x(),b=t(b),g=b[2],h=a.cfg.queryString,a=l.createElement(b[3]);a.setAttribute(C,b[0]);g&&a.setAttribute("rel",
"stylesheet");a[g?"href":"src"]=b[1]+(h?"?"+h:"");g?(b[4]?u(a,c):c&&c.nextSibling?f.insertBefore(a,c.nextSibling):u(a),d("success",a)):(Q(a,f,d,e),f.appendChild(a))}function E(a,b,c){var d=a.cfg.mode===m.modes.PROD,e=a.cfg.queryString,f=false,g=a.cfg.debug;if(a=/\.jsonp$/.test(b))b=b.replace(/p$/,"");e&&(d=true,b=b+"?"+e);n.jQuery.ajax({dataType:a?"jsonp":"html",success:function(a){f||(f=true,g&&g(" * successful loaded "+b),c(200,a))},complete:function(a){f||(f=true,g&&g(" * completed "+b),c(a.status,
a.responseText))},cache:d,url:b})}function r(a,b,c){if(b||!("cfg"in a))i(a,{registry:{},cfg:i(new F,{processors:new G,domains:{local:["json","/javascripts/will/"]},packages:{}})}),"call"in a||i(a,q);p(c)&&c(a.cfg)}function H(a,b){var c=b.packageName,d=b.domainName,d=a[d]||(a[d]={}),c=d[c]||(d[c]={}),d=b.name;return c[d]||(c[d]={rescue:function(){}})}function I(a,b,c){var d=function(){return c.apply(a,arguments)},e="impl";k(c)&&(e=c,c=b[e]);b[e]=function(){var f=arguments,g=b.assets||b.libs;if(g&&
g.length)y(a,"loadDependenciesAndCall",[a,b,f]);else return b[e]=e=="impl"?d:c,b[e].apply(b,f)}}function z(a,b,c,d){if(!o(c)){var e=c.impl||p(c.getImpl)&&c.getImpl(a),f=c.assets||c.libs;if(p(e))b=H(b,d),b.assets=o(f)||!s(f)?[]:f,I(a,b,e),b.rescue=c.rescue||b.rescue;else for(e in c)d.name=e,z(a,b,c[e],d)}}function J(a,b){var c=a.cfg,d=c.domains,e="local",f=c.defaultPackage,g=b.toString();if(/^(?:(\w+):)?(?:(\w+)\.)?(\w+)$/.test(g))g=RegExp.$3,f=RegExp.$2||c.packages[g]||f,e=RegExp.$1||e;d[e]||(e="local");
return{format:d[e][0],domain:d[e][1],mode:d[e][2],domainName:e,packageName:f,name:g,toString:function(){return e+":"+f+"."+g}}}function S(a,b,c){var a=a.cfg,d=b.packageName,e=b.name;if(c==j)c=b.mode;if(c==j)c=a.mode;return b.domain+(c==m.modes.PROD?d:d==a.defaultPackage?e:d+"/"+e)+"."+b.format}function y(a,b,c){var a=a.cfg.processors,d=a[b];d||(d=a[b]=v(function(a){p(a)&&a()}));d.process(c)}function T(a,b){return function(){var c=arguments,d=J(a,b);y(a,"callComponent",[a,d,c])}}function K(a,b,c){var d=
{assets:b};return function(b){if(!d.impl){var f,g;p(b)?(f=function(){b("success")},g=function(){b("error")}):f=g=function(){};I(a,d,f);d.rescue=g;d.removeElement=c;d.impl()}}}function F(){}function G(){}var m,q={},C="data-willjs-id",O=/^\^?([\w\-\.]+?)(?:\.min|\-\d+(?:\.\d+)*(?:\w+)?)*\.(?:css|js)$/,L=Array.prototype.slice,N=Object.prototype.toString,M=false,l=n.document;n[A]=m=new w(A);i(q,{call:function(a){return T(this,a)},use:function(a){return K(this,s(a)?a:L.call(arguments,0),false)},addComponent:function(a,
b){return z(this,this.registry,b,J(this,a))},addProcessor:function(a,b){this.cfg.processors[a]||(this.cfg.processors[a]=v(b))},process:function(a){y(this,a,L.call(arguments,1))},modes:{DEV:0,PROD:1},"u.extend":i,as:function(a){return!a?a:n[a]||(n[a]=new w(a,true))},configure:function(a){r(this,false,a);return this},reconfigure:function(a){r(this,true,a);return this}});i(w.prototype,q);q.u.loadComponent=function(a,b,c){M?c(500,""):a.use("//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js")(function(d){d===
"success"?(q.u.loadComponent=E,E(a,b,c)):(M=true,c(500,""))})};i(F.prototype,{mode:m.modes.DEV,version:"1.2.2",addDomain:function(a,b,c,d){this.domains[a]=[k(c)?c:c?"js":"json",b+(/\/$/.test(b)?"":"/")];d!=j&&(this.domains[a][2]=d)},defaultPackage:"root",registerPackage:function(a,b){var c=b.split(/,/),d,e,f;d=this.packages;for(f=0,e=c.length;f<e;)d[c[f++]]=a}});i(G.prototype,{callComponent:v(function(a,b,c){var d=this,e=a.registry,f=S(a,b),g=H(e,b),h=g.impl;if(h)h.apply(j,c);else return b.format==
"js"?(f=b.toString().replace(/[:\.]/g,"_")+"@"+f,K(a,[f],true)(function(a){try{if(a=="success")(h=g.impl)&&h.apply(j,c)}finally{d.sched()}})):m.u.loadComponent(a,f,function(f,i){try{if(f!==200)throw"could not load component: "+b;k(i)&&(i=eval("("+i+")"));if(!o(i))z(a,e,i,b),(h=g.impl)&&h.apply(j,c)}finally{d.sched()}}),false}),loadDependenciesAndCall:v(function(a,b,c){var d=this,e=a.cfg.debug,f=b.assets||b.libs,g,h,i;if(f.length)if(g=f[0],i=/^(?:[^@]+@)?\^/.test(g),h=P(g)){f.shift();if(h[0]){if(b.lastCss)a=
b.bottomCss.nextSibling,i&&D(b.lastCss,h[1])?u(h[1],b.lastCss):a&&D(h[1],b.bottomCss)&&u(h[1],a);if(!b.lastCss||!i)b.bottomCss=h[1];b.lastCss=h[1]}b.impl.apply(j,c)}else return e&&e('** loading asset "'+g+'"'),R(a,g,b[i?"lastCss":"bottomCss"],function(a,e){try{if(a==="success"){f.shift();if(e){if(!b.lastCss||!i)b.bottomCss=e;b.lastCss=e}b.impl.apply(j,c)}else b.rescue.apply(j,c)}finally{d.sched()}},b.removeElement),false;else b.impl.apply(j,c)})});r(m,false)})(window,"will",null);
